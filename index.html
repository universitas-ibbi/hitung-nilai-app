<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hitung Nilai App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
        crossorigin="anonymous">
</head>
<body class="bg-dark">
    <div class="container">
        <div class="row h-100">
            <div class="col-md-8 mx-auto my-auto">
                <div class="card">
                    <div class="card-header">
                        <h5>Hitung Nilai</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="">Absensi</label>
                            <input type="number" class="form-control"
                                id="txtAbsensi">
                        </div>
                        <div class="mb-3">
                            <label for="">Tugas</label>
                            <input type="number" class="form-control"
                                id="txtTugas">
                        </div>
                        <div class="mb-3">
                            <label for="">UTS</label>
                            <input type="number" class="form-control"
                                id="txtUTS">
                        </div>
                        <div class="mb-3">
                            <label for="">UAS</label>
                            <input type="number" class="form-control"
                                id="txtUAS">
                        </div>
                        <div class="float-end">
                            <button class="btn btn-success"
                                id="btnHitung">Hitung</button>
                        </div>
                        <div class="clearfix"></div>
                        <hr>
                        <div class="mb-3">
                            <label for="">Nilai Angka</label>
                            <input type="number" class="form-control" disabled
                                id="txtNilai">
                        </div>
                        <div class="mb-3">
                            <label for="">Nilai Huruf</label>
                            <input type="text" class="form-control" disabled
                                id="txtAngka">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function hitungNilai(absensi, tugas, uts, uas){
            return (absensi*0.1) + (tugas * 0.2) + (uts * 0.3) + (uas * 0.4);
        }

        // 100 - 86 => A
        // 85 - 76 => B
        // 75 - 60 => C
        // 59 - 51 => D
        // <= 50 => E
        function cariNilaiHuruf(nilaiAngka){
            let huruf = "";

            if(nilaiAngka <= 50){
                huruf = "E";
            }else if(nilaiAngka < 60){
                huruf = "D";
            }else if(nilaiAngka < 76){
                huruf = "C";
            }else if(nilaiAngka < 86){
                huruf = "B";
            }else if(nilaiAngka <= 100){
                huruf = "A"
            }else {
                huruf = "NA";
            }

            return huruf;
        }

        function validasiInput(){
            let tervalidasi = true;

            [...document.querySelectorAll("div.invalid-feedback")].map(element => element.remove());

            [...document.querySelectorAll("input[type=number]:not(:disabled)")].map(input => {
                if(input.value < 0 || input.value > 100 || input.value === ""){
                    const feedback = document.createElement("div");
                    feedback.classList.add("invalid-feedback");
                    feedback.innerHTML = "Nilai Input harus diisi antara 0 - 100";

                    input.classList.add("is-invalid");
                    input.parentElement.append(feedback);

                    tervalidasi = false;
                }else{
                    input.classList.remove("is-invalid");
                }
            });

            return tervalidasi;
        }


        // function validasiInput(absensi, tugas, uts, uas){
        //     let message = "";
        //     if(absensi < 0 || absensi > 100 || absensi === "" ) {
        //         message += "Abensi harus diisi nilai 0 - 100 \n";
        //     };
        //     if(tugas < 0 || tugas > 100 || tugas === "" ) {
        //         message += "Tugas harus diisi nilai 0 - 100 \n";
        //     };
        //     if(uts < 0 || uts > 100 || uts === "" ) {
        //         message += "UTS harus diisi nilai 0 - 100 \n";
        //     };
        //     if(uas < 0 || uas > 100 || uas === "" ) {
        //         message += "UAS harus diisi nilai 0 - 100 \n";
        //     };

        //     return message;
        // }

        document.getElementById("btnHitung")
            .addEventListener("click", function(){
                const absensi = document.getElementById("txtAbsensi").value;
                const tugas = document.getElementById("txtTugas").value;
                const uts = document.getElementById("txtUTS").value;
                const uas = document.getElementById("txtUAS").value;

               
                if(validasiInput() === true){
                    const nilai = hitungNilai(absensi, tugas, uts, uas);
                    document.getElementById("txtNilai").value = nilai;
                    document.getElementById("txtAngka").value = cariNilaiHuruf(nilai);
                }
            });
    </script>
</body>
</html>